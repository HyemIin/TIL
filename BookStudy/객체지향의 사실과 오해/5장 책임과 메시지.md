# 5장 책임과 메세지

### 1. 자율적인 책임

**→ 즉, 자율적인 책임을 수행하기 위한 핵심은, 객체가 무엇을(what) 해야하는지를 중심으로 요청해야하는 것.** 

- 설계의 품질을 좌우하는 책임
    - 협력에 참여하는 객체가 얼마나 자율적인지에 따라 전체 애플리케이션의 품질이 결정된다.
- 자신의 의지에 따라 증언할 수 있는 자유
    - 책임이 자율적이지 않다면, 객체가 아무리 노력해도 자율적으로 책임을 수행하기 어렵기 때문이다.
    - 예를 들어 판사가 모자장수에게 단순히 증언하라는 것과, 기억을 떠올려서, 시간순서대로, 구두로 설명하라고 디테일하게 요청하는 것은 차이가 있다. 당연히 후자가 더 자율성을 억압하는 것이기에, 모자장수가 적어둔 메모 등을 활용할 수 없는 제약이 발생한다.
    - 이는 곧 왕의 명령에 의존하는 것이다.
- 너무 추상적인 책임
    - 단, 반대로 너무 추상적인 경우도 좋은 것이 아니다. ex. 설명하라. (무엇을요..?)
    - 협력의 의도를 명확히 표현해야한다.
- 어떻게가 아니라 무엇을
    - 즉, 자율적인 책임을 수행하기 위한 핵심은, 객체가 무엇을(what) 해야하는지를 중심으로 요청해야하는 것.
    - 어떻게(how)는 객체가 알아서 할 것이다.
- 책임을 자극하는 메시지
    - 책임 = 어떤 행동을 하라는 뜻이며, 책임을 수행하는 방법은 외부에서 요청이 왔을 때 만 수행한다.
    - 즉, 외부의 요청인 메시지가 포인트이다.

### 2. 메시지와 메서드

**→ 메시지를 어떻게 처리할 것인가에 대한 정의가 메서드이다. 이런 메시지와 메서드를 통해 유연하고 확장 가능하고 재사용성이 높은 협력이 가능해진다.**

- 메시지(what?)
    - 객체는 메시지를 전송함으로써 다른 객체에 접근한다. 이것이 다른 객체에 접근할 수 있는 유일한 방법이다.
    - 메시지 구성은 “수신자-메시지 이름-인자” 로 구성된다.
    - 모자장수, 증언하라(어제 왕국에서 있었던 일)
- 메서드(how?)
    - 메서드란, 메세지를 처리하기 위해 내부적으로 선택하는 방법. 즉, how에 대한 내용
    - 모자 장수가 “증언하라”라는 왕의 메시지를 처리하기 위해 어떻게 증언할 것인지 고를 것
- 다형성
    - 서로 다른 유형의 객체가 동일한 메시지에 대해 서로 다르게 반응하는 것
    - 왕의 “증언하라”라는 메시지를 받고, 모자장수,요리사,엘리스는 각각 다른 방식으로 증언하는 것
    - 어쨌든 왕의 입장에선 what이 충족됐기에 상관없음
    - 즉, 메시지 송신자 입장에서는 다형적인 수신자를 구별할 필요가 없다.
    - 이런 다형성 덕분에 동일한 역할을 수행하는 객체들이 **대체 가능성**을 가질 수 있게 된다.
    **→ 유연성,재사용성**
- 유연하고 확장 가능하고 재사용성이 높은 협력의 의미
    - 유연 : 송신자는 수신자가 메시지를 이해할수만 있다면 누구라도 상관하지 않는다.
    - 확장 : 협력 과정에서 아무 비용없이 수신자를 교체할 수 있기 때문에 새로운 유형의 객체를 협력에 끼워 넣기만 하면 된다.
    - 재사용성 : 협력에 영향을 미치지 않고 다양한 객체가 수신자의 자리를 대체할 수 있다.
- 송신자와 수신자를 약하게 만드는 메시지
    - 메시지가 있기 때문에 유연하고 확장 가능하고 재사용성이 높은 협력이 이루어 질 수 있는 것.
    - 메시지로 인해 송신자와 수신자의 결합도를 낮추기 때문
    - 송신자 : 수신자가 메시지를 이해하고 처리할 줄 안다는 것만 알면 나머진 상관 안함
    - 수신자 : 메시지에 적힌 책임만 완수하면 어떻게 수행하는 것은 자율적임

### 3. 메시지를 따라라

**→ 메시지의 책임을 수행한다면 객체지향은 지켜질 것이다.**

- 객체지향의 핵심, 메시지
    - 객체지향의 강력함은 클래스가 아니라 메시지이다.
    - 클래스는 단지 동적 객체들의 특징과 행위를 정적인 텍스트로 표현하기 위한 추상화 도구이다.
    - 중요한건 객체의 속성과 행위를 식별하는 것이 먼저다.
    - 그리고 이 객체 간 커뮤니케이션에 초점을 맞춰야한다.
    - 즉, 메시지 중심의 협력 설계가 핵심이다.
- 책임-주도 설계 다시 살펴보기
    - 책임 주도 설계 : 책임을 완수하기 위해 협력하는 객체들을 이용해 시스템을 설계하는 방법
    - 애플리케이션이 수행하는 기능 = 시스템의 책임 이라는 전제를 까는 것부터 시작한다.
    - 시스템이 수행할 책임을 구현하기 위해 협력 관계를 시작할 적절한 객체를 찾아 시스템의 책임을 객체의 책임으로 할당한다.
    - 객체는 책임을 수행할 때 다른객체와 메시지를 통해 협력한다.
- What/Who 사이클
    - what/who 사이클 : 어떤 행위가 필요한지 결정 후 이 행위를 수행할 객체를 결정하는 것
    - 여기서 행위 = 메시지를 의미한다.
    - **즉, 협력이라는 문맥 안에서 필요한 메시지를 먼저 결정한 후,** 메시지를 수신하기에 적합한 객체를 선택한다.
    - 이렇게 메시지를 먼저 결정함으로써 객체의 인터페이스를 발견할 수 있다는 사실이 중요하다.
- 묻지 말고 시켜라
    - 메시지 송신자는 수신자자의 상태를 알수없고, 알 필요도없다. 그저 시키기만 하면 된다.
    - 이런 패턴이 객체의 자율성을 증진시킨다. 객체의 캡슐화를 보장하기 때문이다.
- 메시지를 믿어라
    - 객체지향 시스템은 메시지를 전송하는 객체와 메시지를 이해하는 객체를 연결하느 상호 관련 짓는 과정을 통해 구축되기 때문에, 메시지 대로 책임을 수행하기만하면 객체의 자율적인 책임이란 보장될 것이다.

### 4. 객체 인터페이스

**→객체는 인터페이스를 통해 메시지를 전달받는다.**

- 인터페이스
    - (정의) 인터페이스란 어떤 두 사물이 마주치는 경계지점에서 서로 상호작용할 수 있게 이어주는 방법이나 장치
    - 인터페이스 사용법만 알고 있으면 대상의 내부 구조나 동작을 몰라도 상호작용이 가능하다.
    - 객체는 이 인터페이스를 통해 외부로부터 메시지를 받는다.
- 메시지가 인터페이스를 결정한다.
    - 인터페이스는 객체가 수신할 수 있는 메시지의 목록으로 구성
- 공용 인터페이스
    - 외부에 공개된 인터페이스를 공용 인터페이스라고 한다.
    - 왕과 모자장수 사이에는 증언하라 라는 메시지를 전송하고 수신할 수 있는 인터페이스가 존재한다.
    - 모자장수와 하얀 토끼 사이에는 입장하라 라는 메시지를 전송하고 수신할 수 있는 인터페이스가 존재한다.
    - 이처럼 객체는 인터페이스를 통해 메시지가 수신됐을 때 증언하거나 증인식에 입장할 책임을 자율적으로 수행한다.
- 책임,메시지,그리고 인터페이스
    - 

### 5. 인터페이스와 구현의 분리

- 객체 관점에서 생각하는 방법
    - 객체 지향적 사고방식을 이해하기 위해선 아래 3가지 원칙이 중요하다.
    - 좀 더 추상적인 인터페이스
        - 메시지에 how가 아닌 what을 담아야한다.
    - 최소 인터페이스
        - 외부에서 사용할 필요가 없는 인터페이스는 노출하지 말 것
    - 인터페이스와 구현 간의 차이가 있다는 점을 인식
- 구현
    - (정의) 객체를 구성하지만 공용 인터페이스에 포함되지 않는 모든 것
    - 객체는 상태를 가지며, 외부에 노출되는 공용 인터페이스의 일부가 아니기에 상태를 어떻게 표현할 것인가는 구현에 포함된다.
    - 또한 객체는 행동을 가진다. 행동(메서드) 또한 구현의 일부다.
- 인터페이스와 구현의 분리 원칙
    - 공용 인터페이스와 객체 내부에 숨겨진 구현을 명확하게 분리해서 고려해야한다는 것을 의미
    - 결론적으로 객체 설계의 핵심은 객체를 두개의 분리된 요소로 분할해 설계하는 것.
    - 공용 인터페이스 & 구현
- 캡슐화
    - (정의) 객체의 자율성을 보존하기 위해 구현을 외부로부터 감추는 행위
    - 다른 말로 정보은닉이라 한다.
    - (why not) 캡슐화를 하지 않으면, 객체의 상태가 타인에 의해 강제로 setting될 위험이 존재
    - 상태와 행위의 캡슐화
        - 객체는 상태와 행위의 조합이며, 객체 스스로 자신의 상태를 관리하며 상태를 변경하고 외부에 응답할 수 있는 행동을 내부에 함께 보관한다.
        - 외부에서 반드시 접근해야하는 행위만 골라 공용 인터페이스를 통해 노출하는 것
    - 사적인 비밀의 캡슐화
        - 구현과 공용인터페이스의 분리
    - 인터페이스 : 추상메서드를 통해 외부에서 부를 수 있는 것들을 정의
    - private : 사적인 비밀
    - 상태 : int a = 10; (여기서 10을 의미)
    - 행위 : 추상 메서드를 재정의한 것

### 6. 책임의 자율성이 협력의 품질을 결정한다.

→ **즉, 책임이 자율적일 수록 변경에 의해 수정되어야 할 범위가 좁아지고 명확해지기 때문이다.**

- 객체의 자율성이 왜 중요한가??
    - 자율적인 책임은 협력을 단순하게 만든다.
        - 원하는 것만 단순히 요청하면 되기 때문. 사족을 붙여서, 어떻게하라고 지시할 필요가 없다.
        - 즉,책임이 적절히 추상화된다.
    - 자율적인 책임은 객체의 외/내부를 명확히 분리한다.
    - 자율적인 책임은 책임을 수행하는 내부적인 방법을 변경하더라도 외부에 영향을 미치지 않는다.
        - 모자장수가 증언하는 방법을 바꿔도 왕은 어떤 영향을 받지 않는다.
    - 자율적인 책임은 협력의 대상을 다양하게 선택할 수 있는 유연성을 제공한다.
        - 증인이 모자장수가 아닌 요리사여도 왕은 상관없다.
    - 자율적인 책임은 객체의 역할을 이해하기 쉽도록 한다.
- **즉, 책임이 자율적일 수록 변경에 의해 수정되어야 할 범위가 좁아지고 명확해지기 때문이다.**
